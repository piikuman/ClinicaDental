--DROP SEQUENCE SEC_PACIENTE_OID;

DROP TABLE DOCTORA;

CREATE TABLE DOCTORA (
	NOMBRE VARCHAR2(25) NOT NULL,
	APELLIDOS VARCHAR2(75),
    DNI VARCHAR2(10) NOT NULL UNIQUE,
    FECHA_NACIMIENTO DATE NOT NULL,
	POBLACION VARCHAR2(75) NOT NULL,
	DIRECCION VARCHAR2(75) NOT NULL,
    FECHAALTA DATE NOT NULL,
	SUELDO VARCHAR2(75) NOT NULL,
	TELEFONO VARCHAR2(75) UNIQUE,
    CODIGODOCTORA VARCHAR(75) NOT NULL UNIQUE,
	OID_DOCTORA INTEGER NOT NULL,
	PRIMARY KEY (OID_DOCTORA) );
	

CREATE OR REPLACE PROCEDURE INSERTAR_DOCTORA 
  (P_NOM IN DOCTORA.NOMBRE%TYPE,
   P_APE IN DOCTORA.APELLIDOS%TYPE,
   P_DNI IN DOCTORA.DNI%TYPE,
   P_FECHA_NAC IN DOCTORA.FECHA_NACIMIENTO%TYPE,
   P_CORREO IN DOCTORA.CORREO%TYPE,
   P_POBLACION IN DOCTORA.POBLACION%TYPE,
   P_DIRECCION IN DOCTORA.DIRECCION%TYPE,
   P_FECHAALTA IN DOCTORA.FECHAALTA%TYPE,
   P_TEL IN DOCTORA.TELEFONO%TYPE,
   P_SUELDO IN DOCTORA.SUELDO%TYPE,
   P_CODIGODOCTORA IN DOCTORA.CODIGODOCTORA%TYPE
   ) IS
BEGIN
  INSERT INTO PACIENTE(NOMBRE, APELLIDOS, DNI, FECHA_NACIMIENTO,POBLACION,DIRECCION,FECHAALTA,TELEFONO,SUELDO,CODIGODOCTORA)
  VALUES (P_NOM ,P_APE,P_DNI,P_FECHA_NAC,P_CORREO,P_POBLACION,P_DIRECCION,P_FECHAALTA,P_TEL,P_SUELDO,P_CODIGODOCTORA);
END;
/


CREATE OR REPLACE PROCEDURE ACTUALIZAR_DOCTORA(
   P_OID_DOCTORA_A_MOD IN DOCTORA.OID_DOCTORA%TYPE,
   P_NOM IN DOCTORA.NOMBRE%TYPE,
   P_APE IN DOCTORA.APELLIDOS%TYPE,
   P_DNI IN DOCTORA.DNI%TYPE,
   P_FECHA_NAC IN DOCTORA.FECHA_NACIMIENTO%TYPE,
   P_POBLACION IN PACIENTE.POBLACION%TYPE,
   P_DIRECCION IN PACIENTE.DIRECCION%TYPE,
   P_FECHAALTA IN PACIENTE.FECHAALTA%TYPE,
   P_TEL IN DOCTORA.TELEFONO%TYPE,
   P_SUELDO IN DOCTORA.SUELDO%TYPE,
   P_CODIGODOCTORA IN DOCTORA.CODIGODOCTORA%TYPE
   )IS
BEGIN
    UPDATE Paciente
    SET NOMBRE=P_NOM, APELLIDOS=P_APE, DNI=P_DNI, FECHA_NACIMIENTO=P_FECHA_NAC,POBLACION=P_POBLACION,DIRECCION=P_DIRECCION,FECHAALTA=P_FECHAALTA,TELEFONO=P_TEL,SUELDO=P_SUELDO,CODIGODOCTORA=P_CODIGODOCTORA
    WHERE OID_DOCTORA = P_OID_DOCTORA_A_MOD;
END;
/

CREATE OR REPLACE PROCEDURE ELIMINAR_DOCTORA(OID_DOCTORA_A_QUITAR IN DOCTORA.OID_DOCTORA%TYPE) AS
BEGIN
  DELETE FROM DOCTORA WHERE OID_DOCTORA = OID_DOCTORA_A_QUITAR;
END;
/
